---
title: 滕达AC9硬改16M避坑指南
tag: 路由器
date: 2022-05-04
category: 路由器
excerpt: 算是避坑指南吧
---

- 不知道上次更新博文是什么时候了orz，可能只是我太懒了吧，几次内容都想好了结果最后还是没有开始写

# 起因
> 我哥在家里换了带宽后拿了台AC9，本着折腾的念头决定自己改16M Flash，途中踩了不少的坑。

# 准备

自己有个858d的风枪和936的烙铁，但还是菜：<

### 用的上的工具
- CH341A编程器 *1
- SOP8宽体烧录座 *1(因为懒XD)
- 25Q128闪存 *2(多买个备用)
- 烙铁 *1
- 热风枪 *1(技术好或许用不上？)
- 助焊膏 *1(我觉得是必须的，因为原来的锡化不开= =)
- 焊锡 *1(贴回去，我用的是锡膏，还是懒：>)

# 开始
## 第一个坑——TTL100 3秒之谜
![](https://cdn.jsdelivr.net/gh/Sanksu/IMG/2022/TTL100.png)

在各大论坛上逛了许久，发现TTL=100只有三秒就是其中一个批次会出现的问题，腾达在这一批次上修改了cfe，所以我们首先要改cfe

- 首先，打开telnet，国内的固件没有这一开关，但是我们可以直接通过访问**192.168.0.1/goform/telnet**开启

- 路由器插上u盘，用[putty](https://www.chiark.greenend.org.uk/~sgtatham/putty/latest.html)登陆，选择telnet，输入192.168.0.1

> 用户名：root ，密码：Fireitup

<pre><code class="language-css">
mount
cat /dev/mtd0>/tmp/mnt/sda1/ac9_flash.bin # 目录不一定准确，请以实际为准
cat /dev/mtd1>/tmp/mnt/sda1/ac9_cfe.bin # 目录不一定准确，请以实际为准
</code></pre>

用[cfe助手工具](https://cowtransfer.com/s/2d12d5b0bfd744)，打开备份的cfe文件ac9_cfe.bin，对照[老版本cfe](https://cowtransfer.com/s/4bdd72e5685a4c)，更改导出的路由器信息

> 以下是需要修改的信息
- macaddr
- et0macaddr
- sb/1/macaddr
- wps_device_pin

修改完后点击写出固件，保存为bin文件

然后将电脑的IP地址改为192.168.1.2，打开cmd ping 192.168.1.1

打开[tftp64](https://bitbucket.org/phjounin/tftpd64/downloads/) 点log viewer ，选择网卡应该是192.168.1.2，选择改好的cfe.bin的保存路径

路由器断电，先捅RESET再通电，ttl=100出现后，log viewer会出现传送成功的记录，至此cfe就改好了，可以正常刷固件了，但是我的最终目标是硬改16M

## 第二个坑——不能算坑的坑

> 啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊，外壳是真的难拆，金属翘片把我手划伤了TnT

拆原机闪存是件很困难的是，我涂了一堆助焊膏，风枪300度都没吹下来orz，后面加了点锡膏才下来的:(

然后把闪存放到烧录座上

![拆下来的闪存这样放](https://cdn.jsdelivr.net/gh/Sanksu/IMG/2022/SOP8.jpg)

> 注意CH341A编程器底下的丝印，我最开始就插错了导致无法写入orz

![注意](https://cdn.jsdelivr.net/gh/Sanksu/IMG/2022/CH341A——25.jpg)

打开[AsProgrammer](https://github.com/nofeletru/UsbAsp-flash/releases)

选择Flash型号

![](https://cdn.jsdelivr.net/gh/Sanksu/IMG/2022/W25Q128BV.png)

读取，然后保存

换上16M的Flash到烧录座上，将刚刚保存的bin写入到16M Flash上

写完后把16M的闪存贴回路由器上

开机，一切正常，进入了腾达的界面

将电脑ipv4改为如下   
<pre><code class="language-css">
192.168.1.xx
255.255.255.0
</code></pre>

浏览器输入 192.168.0.1

路由器断电，先捅RESET再通电，大约20秒，在松手，然后就进了cfe的页面（不容易:<）

进了cfe先点Restore default NVRAM values

再选择16M的固件上传，等待，最后大功告成

![附图](https://cdn.jsdelivr.net/gh/Sanksu/IMG/2022/AC9.png)